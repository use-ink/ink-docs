"use strict";(self.webpackChunkink_docs=self.webpackChunkink_docs||[]).push([[7945],{65404:(e,i,s)=>{s.d(i,{R:()=>n,x:()=>c});var t=s(36672);const M={},j=t.createContext(M);function n(e){const i=t.useContext(j);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(M):e.components||M:n(e.components),t.createElement(j.Provider,{value:i},e.children)}},65421:(e,i,s)=>{s.d(i,{A:()=>t});const t="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjAwIDUwMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2Q3YjZmYTsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgIH0KCiAgICAgIC5jbHMtMSwgLmNscy0yLCAuY2xzLTMsIC5jbHMtNCwgLmNscy01IHsKICAgICAgICBzdHJva2Utd2lkdGg6IDBweDsKICAgICAgfQoKICAgICAgLmNscy0zIHsKICAgICAgICBmaWxsOiAjYmE4MWY5OwogICAgICB9CgogICAgICAuY2xzLTQgewogICAgICAgIGZpbGw6ICNmZmY7CiAgICAgIH0KCiAgICAgIC5jbHMtNSB7CiAgICAgICAgZmlsbDogI2VhZDlmYzsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGc+CiAgICA8cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xNjAwLDI0Ljg0djQyOC41MmMwLDguMzEtNC4wOCwxNS42Ni0xMC4zNCwyMC4xNy0yLjQsMS43My01Ljg0Ljg2LTYuOTUtMS44OC0zLjkyLTkuNzItMTYuNDEtMTYuODMtMzEuMjEtMTYuODMtOS40NywwLTE3Ljk5LDIuOTEtMjMuOTMsNy41NS0xLjkxLDEuNDktNC42NCwxLjI1LTYuMjQtLjU2LTcuNjYtOC42OC0yMS4yMi0xNC40NS0zNi42OC0xNC40NS0xMy45NSwwLTI2LjM3LDQuNzEtMzQuMjgsMTIuMDEtMS44NCwxLjctNC43MiwxLjU1LTYuNDItLjI5LTkuMzItMTAuMDctMjUuODMtMTYuNzYtNDQuNjItMTYuNzYtMjcuMDUsMC00OS4zNSwxMy44NS01Mi4zNiwzMS43LS40LDIuMzktMi40OSw0LjE0LTQuOTEsNC4xNGwtMTMxNy4yMi4wNWMtMTMuNzEsMC0yNC44My0xMS4xMi0yNC44My0yNC44NFYyNC44NEMwLDExLjEyLDExLjEyLDAsMjQuODMsMGgxNTUwLjM0QzE1ODguODgsMCwxNjAwLDExLjEyLDE2MDAsMjQuODRaIi8+CiAgICA8Zz4KICAgICAgPGVsbGlwc2UgY2xhc3M9ImNscy0zIiBjeD0iMTM5OS40NiIgY3k9IjQ3OS4xNiIgcng9IjMzLjg3IiByeT0iMjAuODQiLz4KICAgICAgPGVsbGlwc2UgY2xhc3M9ImNscy0zIiBjeD0iMTQ4My43OCIgY3k9IjQ3OC42OSIgcng9IjI3Ljk0IiByeT0iMTcuMTkiLz4KICAgICAgPGVsbGlwc2UgY2xhc3M9ImNscy0zIiBjeD0iMTU1Mi4zNyIgY3k9IjQ3OS4wNCIgcng9IjE4LjY1IiByeT0iMTEuNDgiLz4KICAgIDwvZz4KICA8L2c+CiAgPHBhdGggY2xhc3M9ImNscy0zIiBkPSJNMTYwMCwzOTUuNTR2NTcuODJjMCw4LjMxLTQuMDgsMTUuNjYtMTAuMzUsMjAuMTctMi40LDEuNzItNS44NC44Ni02Ljk0LTEuODgtMy45My05LjcyLTE2LjQxLTE2LjgzLTMxLjIxLTE2LjgzLTkuNDcsMC0xNy45OSwyLjkxLTIzLjkzLDcuNTUtMS45MSwxLjQ5LTQuNjQsMS4yNS02LjI0LS41Ni03LjY2LTguNjgtMjEuMjItMTQuNDUtMzYuNjgtMTQuNDUtMTMuOTUsMC0yNi4zNyw0LjctMzQuMjksMTItMS44NCwxLjctNC43MSwxLjU1LTYuNDItLjI5LTkuMzItMTAuMDctMjUuODMtMTYuNzYtNDQuNjItMTYuNzYtMjcuMDYsMC00OS4zNSwxMy44NS01Mi4zNywzMS43LS40LDIuMzktMi40OCw0LjE0LTQuOTEsNC4xNGwtMTMxNy4yMS4wNUMxMS4xMiw0NzguMiwwLDQ2Ny4wOCwwLDQ1My4zNnYtMTQ2LjkzczI4Mi42Nyw4OC45Nyw0NjUuNDUsODguODhjMjg5LjUyLS4xNSw3MTUuMTQtMTI2LjU5LDExMzQuNTUuMjRaIi8+CiAgPHBhdGggY2xhc3M9ImNscy01IiBkPSJNMCwyMS4zM3Y1OC41NWM1MjYuNzYtNDguODUsODY0LjMyLDEzOC4wNSwxNjAwLTMuODZWMjEuMzNDMTYwMCw5LjU1LDE1ODguODgsMCwxNTc1LjE3LDBIMjQuODNDMTEuMTIsMCwwLDkuNTUsMCwyMS4zM1oiLz4KICA8Zz4KICAgIDxyZWN0IGNsYXNzPSJjbHMtNCIgeD0iNDUxLjg0IiB5PSIxNTMuMTIiIHdpZHRoPSI2OTYuMzIiIGhlaWdodD0iMTY4Ljc2IiByeD0iMjkuNjkiIHJ5PSIyOS42OSIvPgogICAgPGc+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTU4My4yNiwyNDEuNjRjMC0xNS44NCw2LjQ0LTI0LjM1LDE2Ljk1LTI0LjM1czE2Ljk1LDguNTEsMTYuOTUsMjQuMzUtNi40NCwyNC42NC0xNi45NSwyNC42NC0xNi45NS04Ljk1LTE2Ljk1LTI0LjY0Wk02MTEuNDUsMjQxLjY0YzAtMTMuNTQtNC42Ni0xOS4zOS0xMS4yNS0xOS4zOXMtMTEuMjUsNS44NS0xMS4yNSwxOS4zOSw0LjY2LDE5LjY5LDExLjI1LDE5LjY5LDExLjI1LTYuMTQsMTEuMjUtMTkuNjlaTTU5NS42MiwyNDEuMTNjMC0zLjAzLDIuMTUtNC44OCw0LjU5LTQuODhzNC41OSwxLjg1LDQuNTksNC44OC0yLjE1LDQuOTYtNC41OSw0Ljk2LTQuNTktMS44NS00LjU5LTQuOTZaIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTY0MC43NiwyNDYuNzVsLTEyLjU4LTE3LjMyaDYuNzNsNS43LDcuODRjMS4yNiwyLDIuNzQsNC4xNCw0LjIyLDYuMDdoLjNjMS4zMy0xLjkyLDIuODEtNC4xNCw0LjA3LTYuMTRsNS4zMy03Ljc3aDYuNTFsLTEyLjczLDE3LjgzLDEzLjc3LDE4LjEzaC02LjgxbC02LjIyLTguMjljLTEuNTUtMi0zLjE4LTQuNDQtNC43NC02LjUxaC0uM2MtMS40OCwyLjE1LTIuOTYsNC4yOS00LjQ0LDYuNTlsLTUuOTIsOC4yMWgtNi41MWwxMy42Mi0xOC42NVoiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy0yIiBkPSJNNjcxLjYxLDI0MS4xM2MwLTE1LjYyLDkuMS0yNS4xNiwyMS43Ni0yNS4xNiw1Ljg1LDAsMTAuNDQsMi44MSwxMy4zMiw1LjkybC0zLjU1LDMuOTJjLTIuNTItMi42Ni01LjctNC4zNy05Ljc3LTQuMzctOS4yNSwwLTE1LjMyLDcuNDctMTUuMzIsMTkuNTRzNi4wNywxOS44MywxNS4zMiwxOS44M2M0LjQ0LDAsNy44NC0xLjkyLDEwLjg4LTUuMzNsMy41NSwzLjc3Yy0zLjc3LDQuNDQtOC41OCw3LjAzLTE1LjAyLDcuMDMtMTEuOTksMC0yMS4xNy05LjMyLTIxLjE3LTI1LjE2WiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik03MjkuODUsMjE2Ljg1aDcuMWwxNi4zNiw0OC41NWgtNi42NmwtOC4zNi0yNy4wOWMtMS43LTUuNC0zLjMzLTEwLjczLTQuODEtMTYuMzVoLS4zYy0xLjU1LDUuNjItMy4xMSwxMC45NS00LjgxLDE2LjM1bC04LjUxLDI3LjA5aC02LjM2bDE2LjM2LTQ4LjU1Wk03MjIuMTYsMjQ1LjY0aDIyLjI4djUuMDNoLTIyLjI4di01LjAzWiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik03NjUuNDQsMjE2Ljg1aDI5LjgydjUuMjVoLTIzLjYxdjE2LjM1aDE5Ljk4djUuMjVoLTE5Ljk4djIxLjY4aC02LjIydi00OC41NVoiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy0yIiBkPSJNODA4LjQ0LDIxNi44NWgzMC4wNXY1LjI1aC0yMy44M3YxNS4xN2gyMC4xM3Y1LjI1aC0yMC4xM3YxNy42MWgyNC41N3Y1LjI1aC0zMC43OXYtNDguNTVaIi8+CiAgICAgIDxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTg1MS43MywyMTYuODVoMTMuNzdjOS45MiwwLDE2LjY1LDMuMzMsMTYuNjUsMTEuODQsMCw0LjgxLTIuNzQsOS4xLTguNTEsMTAuNTh2LjNjNy4xLDEuMTEsMTEuMjUsNC45NiwxMS4yNSwxMS42MiwwLDkuNTUtNy40LDE0LjIxLTE4LjI4LDE0LjIxaC0xNC44OHYtNDguNTVaTTg2NC40NSwyMzcuMjhjOC4yOSwwLDExLjYyLTIuNjYsMTEuNjItOC4wN3MtMy44NS03LjE4LTExLjMyLTcuMThoLTYuODh2MTUuMjVoNi41OVpNODY1LjcxLDI2MC4yMmM4LjI5LDAsMTMuMS0yLjc0LDEzLjEtOS4zMiwwLTUuOTktNC41OS04LjQ0LTEzLjEtOC40NGgtNy44NHYxNy43Nmg3Ljg0WiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik05MDcuNDUsMjE2Ljg1aDcuMWwxNi4zNiw0OC41NWgtNi42NmwtOC4zNi0yNy4wOWMtMS43LTUuNC0zLjMzLTEwLjczLTQuODEtMTYuMzVoLS4zYy0xLjU1LDUuNjItMy4xMSwxMC45NS00LjgxLDE2LjM1bC04LjUxLDI3LjA5aC02LjM2bDE2LjM2LTQ4LjU1Wk04OTkuNzUsMjQ1LjY0aDIyLjI4djUuMDNoLTIyLjI4di01LjAzWiIvPgogICAgICA8cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Ik05NDAuNTIsMjE2Ljg1aDEzLjc3YzkuOTIsMCwxNi42NSwzLjMzLDE2LjY1LDExLjg0LDAsNC44MS0yLjc0LDkuMS04LjUxLDEwLjU4di4zYzcuMSwxLjExLDExLjI1LDQuOTYsMTEuMjUsMTEuNjIsMCw5LjU1LTcuNCwxNC4yMS0xOC4yOCwxNC4yMWgtMTQuODh2LTQ4LjU1Wk05NTMuMjUsMjM3LjI4YzguMjksMCwxMS42Mi0yLjY2LDExLjYyLTguMDdzLTMuODUtNy4xOC0xMS4zMi03LjE4aC02Ljg4djE1LjI1aDYuNTlaTTk1NC41MSwyNjAuMjJjOC4yOSwwLDEzLjEtMi43NCwxMy4xLTkuMzIsMC01Ljk5LTQuNTktOC40NC0xMy4xLTguNDRoLTcuODR2MTcuNzZoNy44NFoiLz4KICAgICAgPHBhdGggY2xhc3M9ImNscy0yIiBkPSJNOTg2LjAzLDIxNi44NWgzMC4wNXY1LjI1aC0yMy44M3YxNS4xN2gyMC4xM3Y1LjI1aC0yMC4xM3YxNy42MWgyNC41N3Y1LjI1aC0zMC43OXYtNDguNTVaIi8+CiAgICA8L2c+CiAgPC9nPgogIDxnPgogICAgPGVsbGlwc2UgY2xhc3M9ImNscy0zIiBjeD0iMTM5OS40NiIgY3k9IjQ3OS4xNiIgcng9IjMzLjg3IiByeT0iMjAuODQiLz4KICAgIDxlbGxpcHNlIGNsYXNzPSJjbHMtMyIgY3g9IjE0ODMuNzgiIGN5PSI0NzguNjkiIHJ4PSIyNy45NCIgcnk9IjE3LjE5Ii8+CiAgICA8ZWxsaXBzZSBjbGFzcz0iY2xzLTMiIGN4PSIxNTUyLjM3IiBjeT0iNDc5LjA0IiByeD0iMTguNjUiIHJ5PSIxMS40OCIvPgogIDwvZz4KPC9zdmc+"},90246:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>L,contentTitle:()=>c,default:()=>N,frontMatter:()=>n,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"basics/selectors","title":"Selectors","description":"Selector Hex Title Picture","source":"@site/docs/basics/selectors.md","sourceDirName":"basics","slug":"/basics/selectors","permalink":"/docs/v6/basics/selectors","draft":false,"unlisted":false,"editUrl":"https://github.com/use-ink/ink-docs/edit/master/docs/basics/selectors.md","tags":[],"version":"current","frontMatter":{"title":"Selectors","hide_title":true,"slug":"/basics/selectors"},"sidebar":"reference","previous":{"title":"Events","permalink":"/docs/v6/basics/events"},"next":{"title":"Trait Definitions","permalink":"/docs/v6/basics/trait-definitions"}}');var M=s(23420),j=s(65404);const n={title:"Selectors",hide_title:!0,slug:"/basics/selectors"},c="Selectors",L={},o=[{value:"Selector Calculation",id:"selector-calculation",level:2},{value:"Selector Calculation: ink! Traits",id:"selector-calculation-ink-traits",level:2}];function a(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,j.R)(),...e.components};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(i.p,{children:(0,M.jsx)(i.img,{alt:"Selector Hex Title Picture",src:s(65421).A+"",width:"1600",height:"500"})}),"\n",(0,M.jsxs)(i.admonition,{type:"note",children:[(0,M.jsxs)(i.p,{children:["ink! v6 supports both the native ink! and ",(0,M.jsx)(i.a,{href:"https://docs.soliditylang.org/en/latest/abi-spec.html",children:"Solidity"})," ABI\n(Application Binary Interface) specifications for contract interactions\n(i.e. calling conventions used for message calls)."]}),(0,M.jsxs)(i.p,{children:["When support for Solidity ABI calling conventions is enabled\n(see ",(0,M.jsx)(i.a,{href:"/docs/v6/basics/abi#declaring-the-abi",children:"here"})," for details),\nSolidity ABI selectors for messages are ",(0,M.jsx)(i.strong,{children:"always"})," generated according to the\n",(0,M.jsx)(i.a,{href:"https://docs.soliditylang.org/en/latest/abi-spec.html#function-selector",children:"Solidity ABI specification for function selectors"}),"."]}),(0,M.jsx)(i.p,{children:"So the specification below for message selector calculation only applies to\nnative ink! ABI selectors."}),(0,M.jsxs)(i.p,{children:["Learn more about ink!'s support for multiple ABIs ",(0,M.jsx)(i.a,{href:"/docs/v6/basics/abi",children:"here"}),"."]})]}),"\n",(0,M.jsx)(i.header,{children:(0,M.jsx)(i.h1,{id:"selectors",children:"Selectors"})}),"\n",(0,M.jsxs)(i.p,{children:["Selectors in ink! are a language agnostic way of identifying constructors and messages.\nThey are four-byte hexadecimal strings which look something like: ",(0,M.jsx)(i.code,{children:"0x633aa551"}),"."]}),"\n",(0,M.jsxs)(i.p,{children:["You can find the selector of an ink! constructor or message in your\n",(0,M.jsx)(i.a,{href:"/docs/v6/basics/metadata",children:"contract metadata"})," by looking for the ",(0,M.jsx)(i.code,{children:"selector"})," field of the dispatchable\nyou're interested in."]}),"\n",(0,M.jsxs)(i.p,{children:["Here is an example of how you can grab the message name and selector from your contract\nmetadata using ",(0,M.jsx)(i.a,{href:"https://stedolan.github.io/jq/",children:(0,M.jsx)(i.code,{children:"jq"})}),"."]}),"\n",(0,M.jsx)(i.pre,{children:(0,M.jsx)(i.code,{className:"language-bash",children:'cat target/ink/flipper.json | jq \'.spec.messages[0] | "\\(.label): \\(.selector)"\'\n"flip: 0x633aa551"\n'})}),"\n",(0,M.jsx)(i.h2,{id:"selector-calculation",children:"Selector Calculation"}),"\n",(0,M.jsx)(i.p,{children:"If you do not have access to a contract's metadata, you can also calculate it yourself."}),"\n",(0,M.jsx)(i.p,{children:"The algorithm ink! uses is fairly straightforward:"}),"\n",(0,M.jsxs)(i.ol,{children:["\n",(0,M.jsxs)(i.li,{children:["Get ",(0,M.jsx)(i.em,{children:"just"})," the name of the constructor or message"]}),"\n",(0,M.jsxs)(i.li,{children:["Compute the ",(0,M.jsx)(i.code,{children:"BLAKE2"})," hash of the name"]}),"\n",(0,M.jsx)(i.li,{children:"Take the first four bytes of the hash as the selector"}),"\n"]}),"\n",(0,M.jsx)(i.p,{children:"Let's walk through a short example of what this looks like in practice. Consider the\nfollowing message:"}),"\n",(0,M.jsx)(i.pre,{children:(0,M.jsx)(i.code,{className:"language-rust",children:"#[ink(message)]\nfn frobinate(&mut self, fro: bool, bi: u32, nate: AccountId) -> bool {\n    unimplemented!()\n}\n"})}),"\n",(0,M.jsx)(i.p,{children:"To calculate the selector we:"}),"\n",(0,M.jsxs)(i.ol,{children:["\n",(0,M.jsxs)(i.li,{children:["Grab the name of the message, ",(0,M.jsx)(i.code,{children:"frobinate"})]}),"\n",(0,M.jsxs)(i.li,{children:["Compute ",(0,M.jsx)(i.code,{children:'BLAKE2("frobinate") = 0x8e39d7f22ef4f9f1404fe5200768179a8b4f2b67799082d7b39f6a8ca82da8f1'})]}),"\n",(0,M.jsxs)(i.li,{children:["Grab the first four bytes, ",(0,M.jsx)(i.code,{children:"0x8e39d7f2"})]}),"\n"]}),"\n",(0,M.jsx)(i.h2,{id:"selector-calculation-ink-traits",children:"Selector Calculation: ink! Traits"}),"\n",(0,M.jsxs)(i.p,{children:["These rules change a bit if you define any messages using the ",(0,M.jsx)(i.code,{children:"[ink::trait_definition]"}),"\n",(0,M.jsx)(i.a,{href:"/docs/v6/basics/trait-definitions",children:"macro"}),". For our first step, instead of taking ",(0,M.jsx)(i.em,{children:"just"})," the\nmessage name, we now also add the ",(0,M.jsx)(i.em,{children:"trait name"})," to the selector calculation."]}),"\n",(0,M.jsx)(i.pre,{children:(0,M.jsx)(i.code,{children:'cat target/ink/trait-flipper.json | jq \'.spec.messages[0] | "\\(.label): \\(.selector)"\'\n"Flip::flip: 0xaa97cade"\n'})}),"\n",(0,M.jsx)(i.p,{children:"Let's see what this would look like in practice. Consider the following trait:"}),"\n",(0,M.jsx)(i.pre,{children:(0,M.jsx)(i.code,{className:"language-rust",children:"#[ink::trait_definition]\npub trait Frobinate {\n    fn frobinate(&mut self, fro: bool, bi: u32, nate: AccountId) -> bool;\n}\n\n-- snip --\n\nimpl Frobinate for Contract {\n    #[ink(message)]\n    fn frobinate(&mut self, fro: bool, bi: u32, nate: AccountId) -> bool {\n        unimplemented!()\n    }\n}\n"})}),"\n",(0,M.jsx)(i.p,{children:"To calculate the selector we:"}),"\n",(0,M.jsxs)(i.ol,{children:["\n",(0,M.jsxs)(i.li,{children:["Grab the name of the trait ",(0,M.jsx)(i.strong,{children:"and"})," the name of the message, ",(0,M.jsx)(i.code,{children:"Frobinate::frobinate"})]}),"\n",(0,M.jsxs)(i.li,{children:["Compute ",(0,M.jsx)(i.code,{children:'BLAKE2("Frobinate::frobinate") = 0x8915412ad772b2a116917cf75df4ba461b5808556a73f729bce582fb79200c5b'})]}),"\n",(0,M.jsxs)(i.li,{children:["Grab the first four bytes, ",(0,M.jsx)(i.code,{children:"0x8915412a"})]}),"\n"]}),"\n",(0,M.jsx)(i.admonition,{type:"tip",children:(0,M.jsxs)(i.p,{children:["Don't worry if you're not able to calculate the ",(0,M.jsx)(i.code,{children:"BLAKE2"})," hash of a string by hand.\nYou can use ",(0,M.jsx)(i.a,{href:"https://www.shawntabrizi.com/substrate-js-utilities/",children:"Shawn's Substrate Utilities"}),"\nto do it for you!"]})})]})}function N(e={}){const{wrapper:i}={...(0,j.R)(),...e.components};return i?(0,M.jsx)(i,{...e,children:(0,M.jsx)(a,{...e})}):a(e)}}}]);