"use strict";(self.webpackChunkink_docs=self.webpackChunkink_docs||[]).push([[3382],{9150:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/frontend-0b8f265f639b050d9e9a516ad52faa60.svg"},65404:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var r=t(36672);const s={},i=r.createContext(s);function c(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:n},e.children)}},73189:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"frontend-development/typink-erc20","title":"Building a Frontend with Typink","description":"Frontend Title Picture","source":"@site/tutorials/frontend-development/typink-erc20.md","sourceDirName":"frontend-development","slug":"/frontend-development/typink-erc20","permalink":"/tutorials/frontend-development/typink-erc20","draft":false,"unlisted":false,"editUrl":"https://github.com/use-ink/ink-docs/edit/master/tutorials/frontend-development/typink-erc20.md","tags":[],"version":"current","lastUpdatedBy":"Burnww","lastUpdatedAt":1764605947000,"sidebarPosition":2,"frontMatter":{"title":"Building a Frontend with Typink","sidebar_position":2},"sidebar":"tutorials","previous":{"title":"Building a Frontend with Inkathon","permalink":"/tutorials/frontend-development/inkathon-erc20"},"next":{"title":"Guide","permalink":"/tutorials/guide"}}');var s=t(23420),i=t(65404);const c={title:"Building a Frontend with Typink",sidebar_position:2},o="Build an ERC20 dapp with Typink and ink! v6",a={},l=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step 1: Create New Typink Project",id:"step-1-create-new-typink-project",level:3},{value:"Step 2: Create ERC20 Contract with POP CLI",id:"step-2-create-erc20-contract-with-pop-cli",level:3},{value:"Step 3: Compile the Contract",id:"step-3-compile-the-contract",level:3},{value:"Step 4: Get Testnet Tokens",id:"step-4-get-testnet-tokens",level:3},{value:"Step 5: Deploy Contract via ui.use.ink",id:"step-5-deploy-contract-via-uiuseink",level:3},{value:"Step 6: Register Contract Deployment",id:"step-6-register-contract-deployment",level:3},{value:"Step 7: Generate TypeScript Bindings",id:"step-7-generate-typescript-bindings",level:3},{value:"Step 8: Display Token Information",id:"step-8-display-token-information",level:3},{value:"Step 9: Create Transfer Form",id:"step-9-create-transfer-form",level:3},{value:"Step 10: Watch Transfer Events",id:"step-10-watch-transfer-events",level:3},{value:"Final Result",id:"final-result",level:3},{value:"Features Demonstrated",id:"features-demonstrated",level:4},{value:"Resources",id:"resources",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Frontend Title Picture",src:t(9150).A+"",width:"1600",height:"500"})}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"build-an-erc20-dapp-with-typink-and-ink-v6",children:"Build an ERC20 dapp with Typink and ink! v6"})}),"\n",(0,s.jsx)(n.p,{children:"In this tutorial, we'll guide you through building a complete ERC20 token dapp using Typink with ink! v6 on PolkaVM (pallet-revive). You'll learn how to create, deploy, and interact with an ERC20 token contract, including transfers and real-time event notifications."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What We'll Build:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"ERC20 token contract using ink! v6"}),"\n",(0,s.jsx)(n.li,{children:"Token transfer interface with real-time balance updates"}),"\n",(0,s.jsx)(n.li,{children:"Transaction notifications with txToaster"}),"\n",(0,s.jsx)(n.li,{children:"Live Transfer event monitoring with toast notifications"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Technologies:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://typink.dev/",children:"Typink"})," - React hooks for contract interactions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://use.ink/docs/v6",children:"ink! v6"})," - Latest ink! on PolkaVM (pallet-revive)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://learn.onpop.io/contracts/welcome/install-pop-cli",children:"POP CLI"})," - Contract development tool"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://nextjs.org/",children:"Next.js"})," - Frontend framework"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Node.js v20 or higher"}),"\n",(0,s.jsx)(n.li,{children:"pnpm (or npm/yarn/bun)"}),"\n",(0,s.jsx)(n.li,{children:"Rust and cargo-contract (for contract compilation)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-new-typink-project",children:"Step 1: Create New Typink Project"}),"\n",(0,s.jsx)(n.p,{children:"Let's start by creating a new project using the Typink CLI:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm create typink@latest\n"})}),"\n",(0,s.jsx)(n.p,{children:"Follow the interactive prompts:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Project name:"})," ",(0,s.jsx)(n.code,{children:"erc20-dapp"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Contract type:"})," Select ",(0,s.jsx)(n.code,{children:"Ink! v6 (PolkaVM, pallet-revive)"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Networks:"})," Select ",(0,s.jsx)(n.code,{children:"Passet Hub"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The CLI will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Create the project structure"}),"\n",(0,s.jsx)(n.li,{children:"Install dependencies"}),"\n",(0,s.jsx)(n.li,{children:"Setup TypinkProvider with Passet Hub"}),"\n",(0,s.jsx)(n.li,{children:"Initialize git repository"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Navigate to your project:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd erc20-dapp\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-create-erc20-contract-with-pop-cli",children:"Step 2: Create ERC20 Contract with POP CLI"}),"\n",(0,s.jsx)(n.p,{children:"We'll use POP CLI to create our ERC20 contract. First, install POP CLI if you haven't:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cargo install --git https://github.com/r0gue-io/pop-cli\n"})}),"\n",(0,s.jsx)(n.p,{children:"Create a new contract using POP CLI:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pop new contract\n"})}),"\n",(0,s.jsx)(n.p,{children:"When prompted:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select contract:"})," ",(0,s.jsx)(n.code,{children:"erc20"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Project name:"})," ",(0,s.jsx)(n.code,{children:"erc20"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This creates an ",(0,s.jsx)(n.code,{children:"erc20"})," folder with the ERC20 contract template."]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-compile-the-contract",children:"Step 3: Compile the Contract"}),"\n",(0,s.jsx)(n.p,{children:"Navigate to the contract directory and build it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd erc20\npop build\n"})}),"\n",(0,s.jsxs)(n.p,{children:["After successful compilation, you'll find the artifacts in ",(0,s.jsx)(n.code,{children:"target/ink/"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"erc20.contract"})," - Bundle file (metadata + wasm)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"erc20.json"})," - Contract metadata"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"erc20.wasm"})," - Contract bytecode"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Copy these files to your project's contracts folder:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir -p ../src/contracts/artifacts/erc20\ncp target/ink/erc20.* ../src/contracts/artifacts/erc20/\ncd ..\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4-get-testnet-tokens",children:"Step 4: Get Testnet Tokens"}),"\n",(0,s.jsx)(n.p,{children:"Before deploying, you'll need PAS testnet tokens on Passet Hub:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Get PAS on Passet Hub:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Visit ",(0,s.jsx)(n.a,{href:"https://faucet.polkadot.io/?parachain=1111",children:"Paseo Faucet for Passet Hub"})]}),"\n",(0,s.jsx)(n.li,{children:"Request PAS tokens for your Passet Hub wallet address"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-5-deploy-contract-via-uiuseink",children:"Step 5: Deploy Contract via ui.use.ink"}),"\n",(0,s.jsx)(n.p,{children:"Now let's deploy the ERC20 contract:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Visit"})," ",(0,s.jsx)(n.a,{href:"https://ui.use.ink/",children:(0,s.jsx)(n.strong,{children:"ui.use.ink"})})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Connect Your Wallet:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Click "Connect Wallet"'}),"\n",(0,s.jsx)(n.li,{children:"Select SubWallet, Talisman, or PolkadotJS"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Select Network:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Choose "Paseo Asset Hub" from the network dropdown'}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Upload Contract:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Click "Add New Contract"'}),"\n",(0,s.jsx)(n.li,{children:'Select "Upload New Contract Code"'}),"\n",(0,s.jsxs)(n.li,{children:["Upload ",(0,s.jsx)(n.code,{children:"erc20.contract"})," file"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Deploy Contract:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Constructor: ",(0,s.jsx)(n.code,{children:"new"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"total_supply"}),": Enter ",(0,s.jsx)(n.code,{children:"1000000000000000000000000"})," (1M tokens with 18 decimals)"]}),"\n",(0,s.jsx)(n.li,{children:'Click "Deploy"'}),"\n",(0,s.jsx)(n.li,{children:"Sign the transaction"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Save Contract Address:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"After successful deployment, copy the contract address"}),"\n",(0,s.jsxs)(n.li,{children:["Example: ",(0,s.jsx)(n.code,{children:"0x1234...5678"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"step-6-register-contract-deployment",children:"Step 6: Register Contract Deployment"}),"\n",(0,s.jsxs)(n.p,{children:["Update ",(0,s.jsx)(n.code,{children:"src/contracts/deployments.ts"})," to register your ERC20 contract:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { ContractDeployment, passetHub } from 'typink';\nimport erc20Metadata from './artifacts/erc20/erc20.json';\n\nexport enum ContractId {\n  ERC20 = 'erc20',\n}\n\nexport const deployments: ContractDeployment[] = [\n  {\n    id: ContractId.ERC20,\n    metadata: erc20Metadata,\n    network: passetHub.id,\n    address: '0x1234...5678', // Replace with your contract address\n  },\n];\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-7-generate-typescript-bindings",children:"Step 7: Generate TypeScript Bindings"}),"\n",(0,s.jsx)(n.p,{children:"The project includes a pre-configured typegen script. Run it to generate type-safe bindings:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm typegen\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This generates TypeScript types in ",(0,s.jsx)(n.code,{children:"src/contracts/types/erc20/"})," including the ",(0,s.jsx)(n.code,{children:"Erc20ContractApi"})," interface."]}),"\n",(0,s.jsx)(n.h3,{id:"step-8-display-token-information",children:"Step 8: Display Token Information"}),"\n",(0,s.jsxs)(n.p,{children:["Create a new component ",(0,s.jsx)(n.code,{children:"src/components/erc20-board.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"'use client';\n\nimport { useState } from 'react';\nimport { formatBalance, useContract, useContractQuery, useTypink } from 'typink';\nimport { toEvmAddress } from 'dedot/contracts';\nimport { Erc20ContractApi } from '@/contracts/types/erc20';\nimport { ContractId } from '@/contracts/deployments';\n\nexport function ERC20Board() {\n  const { connectedAccount } = useTypink();\n  const { contract } = useContract<Erc20ContractApi>(ContractId.ERC20);\n\n  // Fetch total supply\n  const { data: totalSupply, isLoading: loadingSupply } = useContractQuery({\n    contract,\n    fn: 'totalSupply',\n  });\n\n  // Fetch user balance with real-time updates\n  const { data: balance, isLoading: loadingBalance } = useContractQuery(\n    connectedAccount?.address\n      ? {\n          contract,\n          fn: 'balanceOf',\n          args: [toEvmAddress(connectedAccount.address) as `0x${string}`],\n          watch: true, // Auto-refresh on new blocks\n        }\n      : undefined,\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-2xl font-bold\">ERC20 Token</h2>\n      </div>\n\n      {/* Token Info */}\n      <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg\">\n        <div className=\"space-y-2\">\n          <div>\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">Total Supply:</span>\n            <p className=\"text-lg font-semibold\">\n              {loadingSupply ? 'Loading...' : formatBalance(totalSupply, { decimals: 18, symbol: 'UNIT' })}\n            </p>\n          </div>\n\n          {connectedAccount && (\n            <div>\n              <span className=\"text-sm text-gray-600 dark:text-gray-400\">Your Balance:</span>\n              <p className=\"text-lg font-semibold text-blue-600 dark:text-blue-400\">\n                {loadingBalance ? 'Loading...' : formatBalance(balance, { decimals: 18, symbol: 'UNIT' })}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {!connectedAccount && (\n        <p className=\"text-sm text-gray-600\">Connect your wallet to view balance and transfer tokens.</p>\n      )}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Update ",(0,s.jsx)(n.code,{children:"src/app/page.tsx"})," to use the new component:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { ERC20Board } from '@/components/erc20-board';\n\nexport default function Home() {\n  return (\n    <main className=\"container mx-auto p-4 max-w-4xl\">\n      <ERC20Board />\n    </main>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Start the development server:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm dev\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Visit ",(0,s.jsx)(n.a,{href:"http://localhost:3000/",children:"http://localhost:3000"})," and connect your wallet to see your token balance!"]}),"\n",(0,s.jsx)("img",{src:"/img/typink-tutorial-01.png",alt:""}),"\n",(0,s.jsx)(n.h3,{id:"step-9-create-transfer-form",children:"Step 9: Create Transfer Form"}),"\n",(0,s.jsxs)(n.p,{children:["Now let's add a transfer form. Update ",(0,s.jsx)(n.code,{children:"src/components/erc20-board.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"'use client';\n\nimport { useState } from 'react';\nimport { formatBalance, useContract, useContractQuery, useContractTx, useTypink, txToaster } from 'typink';\nimport { toEvmAddress } from 'dedot/contracts';\nimport { Erc20ContractApi } from '@/contracts/types/erc20';\nimport { ContractId } from '@/contracts/deployments';\n\nexport function ERC20Board() {\n  const { connectedAccount } = useTypink();\n  const { contract } = useContract<Erc20ContractApi>(ContractId.ERC20);\n\n  const [recipient, setRecipient] = useState('');\n  const [amount, setAmount] = useState('');\n\n  // ... (previous code for totalSupply and balance queries)\n\n  // Transfer transaction\n  const transferTx = useContractTx(contract, 'transfer');\n\n  const handleTransfer = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!recipient || !amount || !connectedAccount) return;\n\n    const toaster = txToaster('Transferring tokens...');\n\n    try {\n      // Validate recipient address\n      if (recipient === toEvmAddress(connectedAccount.address)) {\n        throw new Error('Cannot transfer to yourself');\n      }\n\n      // Convert amount to wei (18 decimals)\n      const amountInWei = BigInt(Math.floor(parseFloat(amount) * 1e18));\n\n      await transferTx.signAndSend({\n        args: [recipient, amountInWei],\n        callback: (result) => {\n          toaster.onTxProgress(result);\n\n          // Clear form on success (balance auto-refreshes with watch: true)\n          if (result.status.type === 'BestChainBlockIncluded' && !result.dispatchError) {\n            setRecipient('');\n            setAmount('');\n          }\n        },\n      });\n    } catch (error: any) {\n      console.error('Transfer failed:', error);\n      toaster.onTxError(error);\n    }\n  };\n\n  const isValidTransfer = recipient && amount && parseFloat(amount) > 0;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* ... (previous token info display) */}\n\n      {/* Transfer Form */}\n      {connectedAccount && (\n        <div className=\"border rounded-lg p-4\">\n          <h3 className=\"text-lg font-semibold mb-4\">Transfer Tokens</h3>\n\n          <form onSubmit={handleTransfer} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">\n                Recipient Address\n              </label>\n              <input\n                type=\"text\"\n                value={recipient}\n                onChange={(e) => setRecipient(e.target.value)}\n                placeholder=\"0x...\"\n                className=\"w-full px-3 py-2 border rounded-md\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-1\">\n                Amount (UNIT)\n              </label>\n              <input\n                type=\"number\"\n                value={amount}\n                onChange={(e) => setAmount(e.target.value)}\n                placeholder=\"0.0\"\n                step=\"0.0001\"\n                min=\"0\"\n                className=\"w-full px-3 py-2 border rounded-md\"\n                required\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={!isValidTransfer || transferTx.inBestBlockProgress}\n              className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed\">\n              {transferTx.inBestBlockProgress ? 'Transferring...' : 'Transfer'}\n            </button>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"The form will look like below:"}),"\n",(0,s.jsx)("img",{src:"/img/typink-tutorial-02.png",alt:""}),"\n",(0,s.jsx)(n.h3,{id:"step-10-watch-transfer-events",children:"Step 10: Watch Transfer Events"}),"\n",(0,s.jsxs)(n.p,{children:["Let's add real-time Transfer event monitoring with toast notifications. Update ",(0,s.jsx)(n.code,{children:"src/components/erc20-board.tsx"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"'use client';\n\nimport { useCallback, useState } from 'react';\nimport { toast } from 'sonner';\nimport { formatBalance, useContract, useContractQuery, useContractTx, useTypink, useWatchContractEvent, txToaster } from 'typink';\nimport { toEvmAddress } from 'dedot/contracts';\nimport { Erc20ContractApi } from '@/contracts/types/erc20';\nimport { ContractId } from '@/contracts/deployments';\nimport { shortenAddress } from '@/lib/utils';\n\nexport function ERC20Board() {\n  const { connectedAccount } = useTypink();\n  const { contract } = useContract<Erc20ContractApi>(ContractId.ERC20);\n\n  // ... (all previous code)\n\n  // Watch Transfer events\n  useWatchContractEvent(\n    contract,\n    'Transfer',\n    useCallback((events) => {\n      events.forEach((event) => {\n        const { from, to, value } = event.data;\n\n        // Check if current user is involved (case-insensitive EVM address comparison)\n        const userEvmAddress = connectedAccount?.address ? toEvmAddress(connectedAccount.address).toLowerCase() : '';\n        const isReceiver = to && userEvmAddress === to.toString().toLowerCase();\n        const isSender = from && userEvmAddress === from.toString().toLowerCase();\n\n        if (isReceiver || isSender) {\n          const direction = isReceiver ? 'received' : 'sent';\n          const otherParty = isReceiver ? from : to;\n\n          toast.success('Transfer Event', {\n            description: `You ${direction} ${formatBalance(value, { decimals: 18, symbol: 'UNIT' })} ${\n              isReceiver ? 'from' : 'to'\n            } ${shortenAddress(otherParty?.toString())}`,\n            duration: 5000,\n          });\n        }\n      });\n    }, [connectedAccount?.address])\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* ... (all previous JSX) */}\n\n      {/* Recent Events */}\n      <div className=\"text-xs text-gray-500 mt-4\">\n        <p>\ud83d\udca1 Transfer events are monitored in real-time</p>\n        <p>You'll see notifications when tokens are transferred to/from your account</p>\n      </div>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"The notification appears when the contract emits a Transfer event."}),"\n",(0,s.jsx)("img",{src:"/img/typink-tutorial-03.png",alt:""}),"\n",(0,s.jsx)(n.h3,{id:"final-result",children:"Final Result"}),"\n",(0,s.jsx)(n.p,{children:"Congratulations! You've built a complete ERC20 token dapp with:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Real-time Balance Display"})," - Auto-updates on new blocks"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Token Transfer Form"})," - Send tokens to any address"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Transaction Notifications"})," - Real-time progress with txToaster"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Event Monitoring"})," - Live Transfer event notifications"]}),"\n",(0,s.jsxs)(n.li,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Type-Safe Interactions"})," - Full TypeScript support"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"features-demonstrated",children:"Features Demonstrated"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Contract Queries:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useContractQuery"})," with ",(0,s.jsx)(n.code,{children:"watch: true"})," for real-time updates"]}),"\n",(0,s.jsx)(n.li,{children:"Auto-refresh balance after transactions"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Contract Transactions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useContractTx"})," for sending transfers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"txToaster"})," for transaction progress tracking"]}),"\n",(0,s.jsx)(n.li,{children:"Error handling and validation"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Event Watching:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"useWatchContractEvent"})," for Transfer events"]}),"\n",(0,s.jsx)(n.li,{children:"Filtered notifications for user-relevant events"}),"\n",(0,s.jsx)(n.li,{children:"Real-time balance refresh on events"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"resources",children:"Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://learn.onpop.io",children:"POP CLI Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.typink.dev",children:"Typink Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.dedot.dev",children:"Dedot Documentation"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Happy Building! \ud83c\udf89"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);